<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FEBC11-API</title>
  <style>
    /* 코드 영역 스타일 */
    pre {
        background-color: #f5f5f5; /* 배경색 */
        border: 1px solid #ddd; /* 테두리 */
        border-radius: 4px; /* 둥근 모서리 */
        padding: 10px; /* 여백 */
        overflow: auto; /* 스크롤 가능 */
    }
  </style>
  <script type="text/javascript">
    const api_url = location.href + 'apidocs';
    const github_url = 'https://github.com/uzoolove/febc11-vanilla-api';
    const bruno_url = github_url + '/blob/main/server/api/bruno/openmarket';

    window.addEventListener('DOMContentLoaded', () => {
      console.log(document.body.innerHTML);
      document.body.innerHTML = document.body.innerHTML.replace(/<%= api_url %>|&lt;%= api_url %&gt;/g, api_url)
                                                        .replace(/<%= bruno_url %>|&lt;%= bruno_url %&gt;/g, bruno_url);
    });
    
    // window.addEventListener('DOMContentLoaded', () => {
    //   const url = location.href + 'apidocs';
    //   const apilink = document.querySelector('#apilink');
    //   apilink.setAttribute('href', url);
    //   apilink.innerHTML = url;
    // });
  </script>
</head>

<body>
  <h1>FrontEnd BootCamp 11기 API Server</h1>
  <p>API 문서: <a target="_blank" href="<%= api_url %>"><%= api_url %></a></p>
  <div>
    <h2>최신 버전: <span>v3.2.0</span></h2>
  </div>


  <div>
    <h2>변경 사항</h2>

    <h3 id="v3.2.0">v3.2.0 - 2025.01.14</h3>
    <ul>
      <li>[통계 조회] 기간별 주문 수량과 주문 금액을 조회 기능 추가
        <ul>
          <li>관리자 전용의 기간별 주문 수량과 주문 금액을 조회하는 API 추가</li>
          <li>API 문서: <a href="/apidocs/#/%ED%86%B5%EA%B3%84%20%EC%A1%B0%ED%9A%8C/get_admin_statistics_orders">주문량 조회구매 후기 수정</a></li>
          <li>API 테스트: <a
              href="<%= bruno_url %>/04.%EA%B4%80%EB%A6%AC%EC%9E%90/03.%ED%86%B5%EA%B3%84%20%EA%B4%80%EB%A6%AC/%ED%8C%90%EB%A7%A4%20%ED%86%B5%EA%B3%84%20%EC%A1%B0%ED%9A%8C.bru">판매 통계 조회</a></li>
        </ul>
      </li>
    </ul>

    <h3 id="v3.1.0">v3.1.0 - 2025.01.13</h3>
    <ul>
      <li>[구매 후기] 구매 후기 수정 기능 추가
        <ul>
          <li>API 문서: <a href="/apidocs/#/%EA%B5%AC%EB%A7%A4%20%ED%9B%84%EA%B8%B0/patch_replies___id_">구매 후기 수정</a></li>
          <li>API 테스트: <a
              href="<%= bruno_url %>/02.%EC%9D%BC%EB%B0%98%20%ED%9A%8C%EC%9B%90/03.%EA%B5%AC%EB%A7%A4%20%ED%9B%84%EA%B8%B0/%ED%9B%84%EA%B8%B0%20%EC%88%98%EC%A0%95.bru">후기 수정</a></li>
        </ul>
      </li>
      <li>[구매 후기] 구매 후기 삭제 기능 추가
        <ul>
          <li>API 문서: <a href="/apidocs/#/%EA%B5%AC%EB%A7%A4%20%ED%9B%84%EA%B8%B0/delete_replies___id_">구매 후기 삭제</a></li>
          <li>API 테스트: <a
              href="<%= bruno_url %>/02.%EC%9D%BC%EB%B0%98%20%ED%9A%8C%EC%9B%90/03.%EA%B5%AC%EB%A7%A4%20%ED%9B%84%EA%B8%B0/%ED%9B%84%EA%B8%B0%20%EC%82%AD%EC%A0%9C.bru">후기 삭제</a></li>
        </ul>
      </li>
      <li>[회원] 사용자의 모든 북마크 목록 조회시 byUser 속성에 회원 정보뿐만 아니라 북마크 정보도 추가(memo, extra 등의 속성)
        <ul>
          <li>API 문서: <a href="/apidocs/#/회원/get_users___id__bookmarks">사용자의 모든 북마크 목록 조회</a></li>
          <li>API 테스트: <a
              href="<%= bruno_url %>/01.회원/04.회원%20정보%20조회/지정한%20회원%20정보%20조회(북마크%20목록).bru">지정한 회원 정보 조회(북마크 목록)</a></li>
        </ul>
      </li>
      <li>[회원] 회원 목록 조회시 totalSales 속성에 총 판매 수량 추가
        <ul>
          <li>인기 셀러 순으로 정렬하고자 할때 사용할 수 있도록 총 판매 수량 속성을 추가함</li>
          <li>API 문서: <a href="/apidocs/#/회원/get_users_">회원 목록 조회</a></li>
          <li>API 테스트: <a
              href="<%= bruno_url %>/01.회원/03.회원%20목록%20조회/회원%20목록%20조회.bru">회원 목록 조회</a></li>
        </ul>
      </li>
      <li>[회원] 카카오 로그인시 회원 가입한 경우에는 응답 메세지에 isNew: true 속성 추가
        <ul>
          <li>카카오 로그인시 회원 가입한 경우에는 응답 메세지에 isNew: true 속성 추가해서 회원 수정 페이지로 바로 이동할 경우 사용</li>
          <li>API 문서: <a href="/apidocs/#/회원/post_users_login_kakao">카카오 로그인</a></li>
        </ul>
      </li>
    </ul>

    <h3 id="v3.0.0">v3.0.0 - 2025.01.08</h3>
    <ul>
      <li>[구매 후기] 판매자 구매 후기 목록 조회의 응답에 user 속성 추가
        <ul>
          <li>기존 user_name, image 속성은 제거됨</li>
          <li>user._id: 후기 작성자의 id</li>
          <li>user.name: 후기 작성자의 이름</li>
          <li>user.image: 후기 작성자의 프로필 이미지</li>
          <li>API 문서: <a href="/apidocs/#/%EA%B5%AC%EB%A7%A4%20%ED%9B%84%EA%B8%B0/get_replies_seller__seller_id_">판매자 구매 후기 목록</a></li>
          <li>API 테스트: <a
              href="<%= bruno_url %>/02.%EC%9D%BC%EB%B0%98%20%ED%9A%8C%EC%9B%90/03.%EA%B5%AC%EB%A7%A4%20%ED%9B%84%EA%B8%B0/%ED%8C%90%EB%A7%A4%EC%9E%90%20%ED%9B%84%EA%B8%B0%20%EB%AA%A9%EB%A1%9D%20%EC%A1%B0%ED%9A%8C.bru">판매자 후기 목록 조회</a></li>
        </ul>
      </li>
    </ul>

    <h3 id="v2.1.2">v2.1.2 - 2025.01.02</h3>
    <ul>
      <li>[이미지 링크, 파일 다운로드] 파일 응답시 Content-Type을 전달하지 않았던 문제 수정
        <ul>
          <li>파일 응답시 Content-Type을 전달하지 않아서 png, jpg 등의 이미지는 문제가 되지 않지만 svg의 경우 제대로 표시되지 않던 문제 수정</li>
        </ul>
      </li>
    </ul>

    <h3 id="v2.1.1">v2.1.1 - 2025.01.02</h3>
    <ul>
      <li>[구매 후기] 셀러의 모든 후기 조회시 후기 작성자의 이미지 추가
        <ul>
          <li>셀러의 모든 후기 조회시 후기 작성자의 이미지가 출력되도록 수정</li>
          <li>API 문서: <a href="/apidocs/#/%EA%B5%AC%EB%A7%A4%20%ED%9B%84%EA%B8%B0/get_replies_seller__seller_id_">판매자 구매 후기 목록</a></li>
          <li>API 테스트: <a
              href="<%= bruno_url %>/02.%EC%9D%BC%EB%B0%98%20%ED%9A%8C%EC%9B%90/03.%EA%B5%AC%EB%A7%A4%20%ED%9B%84%EA%B8%B0/%ED%8C%90%EB%A7%A4%EC%9E%90%20%ED%9B%84%EA%B8%B0%20%EB%AA%A9%EB%A1%9D%20%EC%A1%B0%ED%9A%8C.bru">판매자 후기 목록 조회</a></li>
        </ul>
      </li>
    </ul>

    <h3 id="v2.1.0">v2.1.0 - 2024.10.30</h3>
    <ul>
      <li>[로그인] accessToken 만료기간 직접 설정 가능
        <ul>
          <li>토큰 만료 테스트를 위해서, 로그인시 만료 기간 설정 기능 추가</li>
          <li>expiresIn 쿼리스트링에 만료기간 지정(다음 예시 참고)
            <ul>
              <li>1d: 1일</li>
              <li>2h: 2시간</li>
              <li>5m: 5분</li>
              <li>10s: 10초</li>
            </ul>
          </li>
          <li>브루노 테스트 시 accessToken을 환경변수로 추가하는 기존 스크립트 수정 필요
            <ul>
              <li>설정: <a href="https://github.com/uzoolove/febc11-vanilla-ins/blob/main/docs/14.api.md#%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%B6%94%EA%B0%80">로그인 스크립트 추가</a></li>
            </ul>
          </li>
          <li>API 문서: <a href="/apidocs/#/%ED%9A%8C%EC%9B%90/post_users_login">로그인</a></li>
          <li>API 테스트: <a
              href="https://github.com/uzoolove/febc11-vanilla-api/blob/main/server/api/bruno/brunch/01-%ED%9A%8C%EC%9B%90/%EB%A1%9C%EA%B7%B8%EC%9D%B8(%EB%A7%8C%EB%A3%8C%EC%8B%9C%EA%B0%84%201%EB%B6%84).bru">로그인(만료시간 1분)</a></li>
        </ul>
      </li>
    </ul>

    <h3 id="v2.0.0">v2.0.0 - 2024.10.29</h3>
    <ul>
      <li>[장바구니] 장바구니 상품 수량 수정, 삭제시 응답 데이터 변경
        <ul>
          <li>장바구니 상품의 수량을 수정하거나 삭제하면 수정이나 삭제가 반영된 장바구니 목록을 응답하도록 수정함</li>
          <li>수정, 삭제 후에 새로운 장바구니 정보로 화면을 갱신하기 위해서 장바구니 목록 조회 API를 다시 호출할 필요가 없음</li>
          <li>API 문서: <a href="/apidocs/#/%ED%9A%8C%EC%9B%90/get_users_name">이름(name) 중복 체크</a></li>
          <li>API 테스트: <a
              href="<%= bruno_url %>/01.%ED%9A%8C%EC%9B%90/01%20%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85%2C%EB%A1%9C%EA%B7%B8%EC%9D%B8/%EC%9D%B4%EB%A6%84%20%EC%A4%91%EB%B3%B5%20%EC%B2%B4%ED%81%AC.bru">이름
              중복 체크</a></li>
          
        </ul>
        <details>
          <summary style="cursor: pointer;">장바구니 수량 수정 후 응답 예시</summary>
          <ul>
            <li>이전 응답
              <pre>
{
  "ok": 1,
  "item": [
    {
      "state": "OS020",
      "products": {
        "state": "OS020"
      }
    },
    {
      "state": "OS035",
      "products": {
        "state": "OS110"
      }
    },
    {
      "state": "OS035",
      "products": {
        "state": "OS010"
      }
    },
    {
      "state": "OS040",
      "products": {
        "state": "OS110"
      }
    }
  ]
}
              </pre>
            </li>
            <li>변경된 응답
              <pre>
{
  "ok": 1,
  "item": [
    {
      "_id": 1,
      "product_id": 1,
      "quantity": 2,
      "createdAt": "2024.10.01 08:36:39",
      "updatedAt": "2024.10.01 08:36:39",
      "product": {
        "_id": 1,
        "name": "캥거루 스턴트 독 로봇완구",
        "price": 22800,
        "seller_id": 2,
        "quantity": 320,
        "buyQuantity": 310,
        "image": {
          "url": "/files/sample-dog.jpg",
          "fileName": "sample-dog.jpg",
          "orgName": "스턴트 독.jpg"
        },
        "extra": {
          "isNew": true,
          "isBest": true,
          "category": [
            "PC03",
            "PC0301"
          ],
          "sort": 5
        }
      }
    }
  ],
  "cost": {
    "products": 62860,
    "shippingFees": 2500,
    "discount": {
      "products": 6290,
      "shippingFees": 2500
    },
    "total": 56570
  }
}
              </pre>
            </li>

          </ul>
        </details>
      </li>
      
    </ul>


    <h3 id="v1.2.0">v1.2.0 - 2024.10.28</h3>
    <ul>
      <li>[회원] 회원명 중복 체크 기능 추가
        <ul>
          <li>API 문서: <a href="/apidocs/#/%ED%9A%8C%EC%9B%90/get_users_name">이름(name) 중복 체크</a></li>
          <li>API 테스트: <a
              href="<%= bruno_url %>/01.%ED%9A%8C%EC%9B%90/01%20%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85%2C%EB%A1%9C%EA%B7%B8%EC%9D%B8/%EC%9D%B4%EB%A6%84%20%EC%A4%91%EB%B3%B5%20%EC%B2%B4%ED%81%AC.bru">이름
              중복 체크</a></li>
        </ul>
      </li>
      <li>[회원] 회원 목록 조회시 북마크 된 횟수 응답 데이터에 추가
        <ul>
          <li>브런치 스토리 메인페이지의 [TOP 구독 작가] 기능에 사용하기 위한 API</li>
          <li>회원 정보의 bookmarkedBy.users 속성에 북마크 된 횟수가 추가됨</li>
          <li>API 문서: <a href="/apidocs/#/%ED%9A%8C%EC%9B%90/get_users_">회원 목록 조회</a></li>
          <li>API 테스트: <a
              href="https://github.com/uzoolove/febc11-vanilla-api/blob/main/server/api/bruno/brunch/01-%ED%9A%8C%EC%9B%90/TOP%20%EA%B5%AC%EB%8F%85%20%EC%9E%91%EA%B0%80.bru">TOP
              구독 작가</a></li>
        </ul>
      </li>
    </ul>

    <h3 id="v1.1.0">v1.1.0 - 2024.10.23</h3>
    <ul>
      <li>[게시판] 게시물 등록 시 image 속성 추가하면 목록, 상세, 북마크 조회시 image 속성으로 확인 가능
        <ul>
          <li>API 참고: <a href="/apidocs/#/게시판/post_posts_">게시글 등록</a></li>
        </ul>
      </li>
    </ul>

    <h3 id="v1.0.0">v1.0.0 - 2024.10.14</h3>
    <ul>
      <li>최초 배포</li>
    </ul>
  </div>
</body>

</html>